<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .header { background: #333; color: white; padding: 20px; margin-bottom: 20px; }
        .video-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .video-item { background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .video-item img { width: 100%; height: auto; border-radius: 5px; }
        .user-info { margin-top: 10px; font-size: 14px; color: #666; }
        .status { color: #28a745; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîí Admin Dashboard - Camera Monitor</h1>
        <p>Theo d√µi ng∆∞·ªùi d√πng ƒëang online</p>
    </div>
    
    <div id="video-grid" class="video-grid">
        <div class="video-item">
            <h3>Ch·ªù ng∆∞·ªùi d√πng k·∫øt n·ªëi...</h3>
            <p>Khi c√≥ ng∆∞·ªùi ƒëƒÉng nh·∫≠p, camera s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y</p>
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const videoGrid = document.getElementById('video-grid');
        const activeUsers = new Map();
        
        socket.emit('join-admin');
        
        socket.on('user-video', (data) => {
            const { userId, video } = data;
            
            if (!activeUsers.has(userId)) {
                const videoItem = document.createElement('div');
                videoItem.className = 'video-item';
                videoItem.id = `user-${userId}`;
                
                videoItem.innerHTML = `
                    <h3>üë§ User: ${userId.substring(0, 8)}</h3>
                    <img id="img-${userId}" src="${video}" alt="User Camera">
                    <div class="user-info">
                        <div class="status">üü¢ ONLINE</div>
                        <div>Th·ªùi gian: ${new Date().toLocaleTimeString()}</div>
                    </div>
                `;
                
                if (videoGrid.children.length === 1 && videoGrid.children[0].textContent.includes('Ch·ªù')) {
                    videoGrid.innerHTML = '';
                }
                
                videoGrid.appendChild(videoItem);
                activeUsers.set(userId, videoItem);
            } else {
                const img = document.getElementById(`img-${userId}`);
                if (img) {
                    img.src = video;
                }
            }
        });
        
        socket.on('disconnect', () => {
            console.log('Admin disconnected');
        });
    </script>
</body>
</html>